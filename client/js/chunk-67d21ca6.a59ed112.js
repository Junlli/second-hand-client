(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-67d21ca6"],{"3ad4":function(t,e,s){},"4fcd":function(t,e,s){"use strict";var o=s("3ad4"),a=s.n(o);a.a},"4fff":function(t,e,s){"use strict";var o=s("ff49"),a=s.n(o);a.a},"5e2f":function(t,e,s){"use strict";var o=s("9c3f"),a=s.n(o);a.a},"663d":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQQAAAEECAIAAABBat1dAAAEW0lEQVR4nO3dQY7cOBAAwenF/v/L3ktij7RBoSSqHXE1WqOZVoKHMqnPr1+/foCfn3+evgE4hRggYoCIASIGiBggYoCIAfLv4t8+n89t9zFtMVtc/5rbHxyyHpIubml7uvqXPAY/Vgb4nxggYoCIASIGiBggYoCIASIGyGoCvXbaftGhQenETHd92SsfnBi0r33TY2BlgIgBIgaIGCBigIgBIgaIGCD7Q7eFofnXI/Odod2SQ9Ox07ZovutJsDJAxAARA0QMEDFAxAARA0QMEDFARibQ7zI0073/hOCLn8XKABEDRAwQMUDEABEDRAwQMUDEADGB3jc07r2yb/j+g4e/iZUBIgaIGCBigIgBIgaIGCBigIwM3d41wRmaRj1yBvBpBw+/60mwMkDEABEDRAwQMUDEABEDRAwQMUD2J9CnDTvvN/SO2isHIW9v+9z2TY+BlQEiBogYIGKAiAEiBogYIGKAiAHyedcu1QmPnMh7/+DWF/1bVgaIGCBigIgBIgaIGCBigIgBMnLw8NBEaWg/5Lahn/g1Y76f845tXt+PlQEiBogYIGKAiAEiBogYIGKAiAEycvDwlVHxtvt/6LtOCF7bvp+hGfMjm1StDBAxQMQAEQNEDBAxQMQAEQPkTds+H5nWvcv27Oz+t48e+Ge3MkDEABEDRAwQMUDEABEDRAwQMUBWb/s8beL7yP7D0wztbr3/r/fIplkHD8MfEQNEDBAxQMQAEQNEDBAxQMQAWU2gf/PJ2we3B55n/DW290BvX/YKE2iYJQaIGCBigIgBIgaIGCBigKwOHn7XNsuh6dj92xpPmy0OPQZD39eVy1oZIGKAiAEiBogYIGKAiAEiBogYIMe9+nboIOT7z1d+1+B2yP2D7SusDBAxQMQAEQNEDBAxQMQAEQNEDJCRCfQjTttz/K6tzNse2Sg/NJ+2MkDEABEDRAwQMUDEABEDRAyQkaHbI/Om+8c0j/ya7zI06xyahFoZIGKAiAEiBogYIGKAiAEiBogYIJ93HWQ74ZFX8Q6NZk876Pddrzm2MkDEABEDRAwQMUDEABEDRAyQ1bbPb9q4uBjTDJ0Hetosb9uBry3dHlmuWRkgYoCIASIGiBggYoCIASIGiBgg+wcPn7Zf9JHzjBeGRsX3/7eAd+0IvTIvtzJAxAARA0QMEDFAxAARA0QMEDFARl59+67jZoeO8n3XDvKvGWxfYWWAiAEiBogYIGKAiAEiBogYICNDt7/EI6/lvHJLew7cnzl0WSsDRAwQMUDEABEDRAwQMUDEABEDxAT6N7bfsro9n74y2B667ML9r+KdY2WAiAEiBogYIGKAiAEiBogYIGKAjEygDzxTdmF7hnrg5uCJW7rybT6ylXmblQEiBogYIGKAiAEiBogYIGKAfIZOwD3Nu+aAEx4ZY532CDl4GP6IGCBigIgBIgaIGCBigIgBIgbIagINfxUrA0QMEDFAxAARA0QMEDFAxAARA+Q/+FmFKoxLrsoAAAAASUVORK5CYII="},"6f23":function(t,e,s){t.exports=s.p+"img/wechat.b4288f39.jpg"},"9c3f":function(t,e,s){},"9fe9":function(t,e,s){"use strict";var o=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"footer"},[o("div",{staticClass:"w"},[o("div",{staticClass:"contact"},[t._m(0),o("Poptip",{attrs:{trigger:"hover",placement:"top"}},[o("a",[o("i",{staticClass:"iconfont"},[t._v("")])]),o("div",{staticClass:"api",attrs:{slot:"content"},slot:"content"},[o("img",{attrs:{src:s("663d"),alt:""}})])]),o("Poptip",{attrs:{trigger:"hover",placement:"top"}},[o("a",[o("i",{staticClass:"iconfont"},[t._v("")])]),o("div",{staticClass:"api",attrs:{slot:"content"},slot:"content"},[o("img",{attrs:{src:s("6f23"),alt:""}})])])],1)])])},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h3",{staticClass:"title"},[t._v("\n        联系我们/\n        "),s("span",[t._v("cantact us")])])}],n=(s("4fcd"),s("2877")),i={},c=Object(n["a"])(i,o,a,!1,null,"042c520c",null);c.options.__file="index.vue";e["a"]=c.exports},e278:function(t,e,s){"use strict";var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-select",{attrs:{filterable:"",remote:"",placeholder:"学校","remote-method":t.getSchoolList,loading:t.schoolLoading},on:{change:t.setVal},model:{value:t.val,callback:function(e){t.val=e},expression:"val"}},t._l(t.schools,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.name}})}),1)},a=[],n=(s("cadf"),s("551c"),s("097d"),{name:"school",props:["school","schools"],data:function(){return{val:"",schoolLoading:!1}},methods:{getSchoolList:function(t){var e=this;""!==t&&(this.schoolLoading=!0,this.$api("".concat(this.$SERVER.GET_SCHOOILIST,"?name=").concat(t)).then(function(t){e.schoolLoading=!1,e.$emit("list",t.data)}))},setVal:function(t){this.$emit("change",t)}},created:function(){},mounted:function(){},watch:{school:function(t){this.val=t}}}),i=n,c=s("2877"),r=Object(c["a"])(i,o,a,!1,null,null,null);r.options.__file="index.vue";e["a"]=r.exports},e382:function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bg clearfix"},[s("home-header",{attrs:{unLogin:t.unLogin}}),s("div",{staticClass:"type-page"},[s("div",{staticClass:"top"},[s("div",{staticClass:"pull-left",attrs:{id:"user_photo"},on:{mouseenter:t.handleMouseOver,mouseleave:t.handleMouseLeave}},[s("img",{attrs:{id:"origin_ph",src:t.$SERVER.FILEURL+t.userInfo.u_avatar,alt:"头像"}}),s("el-upload",{attrs:{action:t.$SERVER.URL+t.$SERVER.PATH+t.$SERVER.POST_UPIMG,"show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.show?s("img",{attrs:{id:"change_ph",src:"https://www.youzixy.com/Public/images/icon/mkhead_hover.png",alt:"头像"}}):t._e()])],1),s("div",{attrs:{id:"user_msg"}},[s("div",{staticClass:"name"},[t._v(t._s(t.userInfo.u_name))]),s("p",{staticClass:"has_sell"},[t._v("共有"),s("span",{staticClass:"all"},[t._v(t._s(t.count))]),t._v("件商品")]),s("ul",{staticClass:"seller_attr"},[s("li",[t._v("学校：  "),s("span",[t._v(t._s(t.userInfo.u_school))])]),t._m(0)]),s("Button",{attrs:{type:"primary"},on:{click:function(e){t.edit()}}},[t._v("编辑个人信息")])],1)]),s("Menu",{attrs:{mode:"horizontal",theme:"light","active-name":this.$route.path.slice(1)}},[s("MenuItem",{attrs:{name:"user/personal",to:"/user/personal"}},[s("Icon",{attrs:{type:"ios-paper"}}),t._v("\n        个人资料\n      ")],1),s("MenuItem",{attrs:{name:"user/sale",to:"/user/sale"}},[s("Icon",{attrs:{type:"ios-people"}}),t._v("\n        我发布的商品\n      ")],1),s("MenuItem",{attrs:{name:"user/buy",to:"/user/buy"}},[s("Icon",{attrs:{type:"ios-people"}}),t._v("\n        我购买的商品\n      ")],1),s("MenuItem",{attrs:{name:"user/collection",to:"/user/collection"}},[s("Icon",{attrs:{type:"ios-construct"}}),t._v("\n      我的收藏\n      ")],1),s("MenuItem",{attrs:{name:"5"}},[s("Icon",{attrs:{type:"ios-construct"}}),t._v("\n        消息中心\n      ")],1),s("MenuItem",{attrs:{name:"user/identify",to:"/user/identify"}},[s("Icon",{attrs:{type:"ios-construct"}}),t._v("\n        认证信息\n      ")],1),s("MenuItem",{attrs:{name:"user/question",to:"/user/question"}},[s("Icon",{attrs:{type:"ios-construct"}}),t._v("\n        问题反馈\n      ")],1)],1),s("router-view")],1),s("home-footer")],1)},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",[t._v("认证：  "),s("span",[t._v("未认证")])])}],n=s("cebc"),i=s("e725"),c=s("9fe9"),r=s("2f62"),l={data:function(){return{active:"user",id:"",show:!1,imgUrl:"",dataList:{list:[]},apiData:{u_avatar:"",u_password:"",u_mail:"",u_name:"",u_school:""},unLogin:!1,count:""}},components:{HomeHeader:i["a"],HomeFooter:c["a"]},computed:Object(n["a"])({},Object(r["d"])(["userInfo"]),Object(r["b"])([])),methods:Object(n["a"])({},Object(r["c"])(["setUserInfo"]),{edit:function(){this.$router.push("/userDetail")},handleMouseOver:function(){this.show=!0},handleMouseLeave:function(){this.show=!1},handleAvatarSuccess:function(t,e){this.imageUrl=t.data.url,this.userInfo.u_avatar=this.imageUrl,this.userInfo.u_password="",this.$api.post(this.$SERVER.POST_UPUSERINFO,Object(n["a"])({},this.userInfo,{id:this.userInfo._id}))},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type,s=t.size/1024/1024<2;return e||this.$message.error("上传头像图片只能是 JPG 格式!"),s||this.$message.error("上传头像图片大小不能超过 2MB!"),e&&s},getCommodity:function(){var t=this;this.$api(this.$SERVER.GET_COMMODITYLIST,{params:{u_id:this.userInfo._id}}).then(function(e){t.count=e.data.count})}}),created:function(){this.getCommodity()},mounted:function(){var t=this;this.$api(this.$SERVER.GET_CURRENTUSERINFO).then(function(e){t.setUserInfo(e.data)})},watch:{$route:{handler:function(){var t=this;this.$api(this.$SERVER.GET_CURRENTUSERINFO).then(function(e){t.setUserInfo(e.data)})},immediate:!0}}},u=l,h=(s("4fff"),s("2877")),f=Object(h["a"])(u,o,a,!1,null,"1cd38ef4",null);f.options.__file="index.vue";e["default"]=f.exports},e725:function(t,e,s){"use strict";var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"header"},[s("div",{staticClass:"w"},[t._m(0),s("router-link",{attrs:{to:"/"}},[s("div",{staticClass:"home"},[t._v("首页")])]),s("div",{staticClass:"school"},[s("span",{staticClass:"location iconfont"},[t._v("")]),s("span",[t._v(t._s(t.u_school))]),s("a",{staticClass:"change",on:{click:function(e){t.modal=!0}}},[t._v("[切换]")]),s("Modal",{attrs:{title:"请输入学校名称","class-name":"vertical-center-modal"},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[s("school",{attrs:{school:t.changeSchoolName,schools:t.schoolList},on:{list:t.getSchoolList,change:t.setSchool}}),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("button",{staticClass:"ivu-btn ivu-btn-text ivu-btn-large",attrs:{type:"button"},on:{click:t.cancel}},[s("span",[t._v("取消")])]),s("button",{staticClass:"ivu-btn ivu-btn-primary ivu-btn-large",attrs:{type:"button"},on:{click:t.changeSchool}},[s("span",[t._v("确定")])])])],1)],1),s("el-button",{staticClass:"release",attrs:{type:"info"},on:{click:t.handleRelease}},[t._v("发布商品")]),s("Modal",{attrs:{width:"360"},model:{value:t.login,callback:function(e){t.login=e},expression:"login"}},[s("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[s("Icon",{attrs:{type:"ios-information-circle"}}),s("span",[t._v("您还未登录")])],1),s("div",{staticClass:"toLogin"},[s("Button",{attrs:{type:"primary"},on:{click:t.handleLogin}},[t._v("请先登录")])],1),s("div",{attrs:{slot:"footer"},slot:"footer"})]),t.userInfo.u_avatar?s("ul",{staticClass:"login-box"},[s("li",[s("a",{staticClass:"headpic-link",on:{click:t.toUser}},[s("img",{staticClass:"headpic",attrs:{src:t.$SERVER.FILEURL+t.userInfo.u_avatar}})])]),s("li",[s("a",{staticClass:"quit",on:{click:function(e){t.handleQuit()}}},[t._v("退出")])])]):t._e(),t.userInfo.u_avatar?t._e():s("ul",{staticClass:"unLogin"},[s("router-link",{attrs:{to:"/login"}},[s("a",{staticClass:"login"},[t._v("登录")])]),s("router-link",{attrs:{to:"/register"}},[s("a",{staticClass:"register"},[t._v("注册")])])],1),s("div",{staticClass:"search"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchKey,expression:"searchKey"}],staticClass:"search-filed",attrs:{type:"text",placeholder:"搜索"},domProps:{value:t.searchKey},on:{input:function(e){e.target.composing||(t.searchKey=e.target.value)}}}),s("button",{staticClass:"search-btn",on:{click:t.searchResult}},[t._v("搜索")])])],1)])},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h1",[s("a",{staticClass:"logo",attrs:{href:"javascript:void(0)"}},[t._v("校乐购")])])}],n=s("cebc"),i=(s("cadf"),s("551c"),s("097d"),s("2f62")),c=s("e278"),r={props:["unLogin"],data:function(){return{login:!1,modal:!1,changeSchoolName:"",schoolList:[],searchKey:""}},components:{School:c["a"]},computed:Object(n["a"])({},Object(i["d"])(["userInfo","u_school"])),methods:Object(n["a"])({},Object(i["c"])(["setUserInfo","setCommoditySchool"]),{handleQuit:function(){var t=this;this.$api(this.$SERVER.GET_QUIT).then(function(e){t.setUserInfo(),t.$router.push("/")})},toUser:function(){this.$router.push("/user/personal")},handleRelease:function(){this.userInfo.u_avatar?this.$router.push("/release"):this.login=!0},handleLogin:function(){this.login=!1,this.$router.push("/login")},getUserInfo:function(){var t=this;this.$api(this.$SERVER.GET_CURRENTUSERINFO).then(function(e){t.setUserInfo(e.data),""===t.u_school&&t.setCommoditySchool(e.data.u_school),t.changeSchoolName=t.u_school})},isLogin:function(){var t=this;this.$api(this.$SERVER.GET_ISLOGIN).then(function(e){return e.state&&t.getUserInfo()})},getSchoolList:function(t){this.schoolList=t},setSchool:function(t){this.changeSchoolName=t,console.log(this.changeSchoolName)},changeSchool:function(){this.setCommoditySchool(this.changeSchoolName),this.modal=!1},cancel:function(){this.modal=!1},searchResult:function(){this.$emit("getCommodity",this.searchKey)}}),created:function(){this.isLogin(),this.getUserInfo()}},l=r,u=(s("5e2f"),s("2877")),h=Object(u["a"])(l,o,a,!1,null,null,null);h.options.__file="index.vue";e["a"]=h.exports},ff49:function(t,e,s){}}]);
//# sourceMappingURL=chunk-67d21ca6.a59ed112.js.map