(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8b2c1cd4"],{"0a49":function(t,e,a){var i=a("9b43"),o=a("626a"),s=a("4bf8"),n=a("9def"),c=a("cd1c");t.exports=function(t,e){var a=1==t,l=2==t,r=3==t,u=4==t,h=6==t,d=5==t||h,f=e||c;return function(e,c,p){for(var g,m,v=s(e),A=o(v),E=i(c,p,3),_=n(A.length),I=0,b=a?f(e,_):l?f(e,0):void 0;_>I;I++)if((d||I in A)&&(g=A[I],m=E(g,I,v),t))if(a)b[I]=m;else if(m)switch(t){case 3:return!0;case 5:return g;case 6:return I;case 2:b.push(g)}else if(u)return!1;return h?-1:r||u?u:b}}},"0ec9":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bg"},[a("home-header"),a("div",{staticClass:"type-page"},[this.$route.query.id?a("div",{staticClass:"release-title"},[a("h1",[t._v("编辑商品")])]):a("div",{staticClass:"release-title"},[a("h1",[t._v("发布商品")])]),a("el-form",{ref:"form",attrs:{model:t.apiData,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"商品标题"}},[a("el-input",{attrs:{placeholder:"请输入标题"},model:{value:t.apiData.c_title,callback:function(e){t.$set(t.apiData,"c_title",e)},expression:"apiData.c_title"}})],1),a("el-form-item",{attrs:{label:"商品详情"}},[a("quill-editor",{ref:"myQuillEditor",attrs:{options:t.editorOption},on:{blur:function(e){t.onEditorBlur(e)},focus:function(e){t.onEditorFocus(e)},change:function(e){t.onEditorChange(e)}},model:{value:t.apiData.c_detail,callback:function(e){t.$set(t.apiData,"c_detail",e)},expression:"apiData.c_detail"}})],1),a("el-form-item",{attrs:{label:"相册"}},[a("el-upload",{class:{disabled:t.isShow},attrs:{action:t.$SERVER.URL+t.$SERVER.PATH+t.$SERVER.POST_UPIMG,"list-type":"picture-card","on-preview":t.handlePictureCardPreview,"on-remove":t.handleRemove,limit:4,"on-success":t.handleSuccess,"file-list":t.filePath}},[a("i",{staticClass:"el-icon-plus"})]),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl}})]),a("span",[t._v("(最多上传4张)")])],1),a("el-form-item",{attrs:{label:"分类"}},[a("el-select",{attrs:{placeholder:"一级分类"},on:{change:t.getType2},model:{value:t.apiData.c_type,callback:function(e){t.$set(t.apiData,"c_type",e)},expression:"apiData.c_type"}},t._l(t.c_type,function(t){return a("el-option",{key:t._id,attrs:{value:t.t_name}})}),1),a("el-select",{attrs:{placeholder:"二级分类"},model:{value:t.apiData.c_type2,callback:function(e){t.$set(t.apiData,"c_type2",e)},expression:"apiData.c_type2"}},t._l(t.c_type2,function(t){return a("el-option",{key:t,attrs:{value:t}})}),1)],1),a("el-form-item",{attrs:{label:"库存"}},[a("el-input",{attrs:{placeholder:"请输入商品库存"},model:{value:t.apiData.c_num,callback:function(e){t.$set(t.apiData,"c_num",e)},expression:"apiData.c_num"}})],1),a("el-form-item",{attrs:{label:"价格"}},[a("el-input",{attrs:{placeholder:"请输入价格（最多两位小数）"},model:{value:t.apiData.c_price,callback:function(e){t.$set(t.apiData,"c_price",e)},expression:"apiData.c_price"}})],1),a("el-form-item",{attrs:{label:"手机号"}},[a("el-input",{attrs:{placeholder:"请输入手机号"},model:{value:t.apiData.c_tel,callback:function(e){t.$set(t.apiData,"c_tel",e)},expression:"apiData.c_tel"}})],1),a("el-form-item",{attrs:{label:"QQ"}},[a("el-input",{attrs:{placeholder:"请输入QQ"},model:{value:t.apiData.c_qq,callback:function(e){t.$set(t.apiData,"c_qq",e)},expression:"apiData.c_qq"}})],1),a("el-form-item",{attrs:{label:"微信"}},[a("el-input",{attrs:{placeholder:"请输入微信号"},model:{value:t.apiData.c_wx,callback:function(e){t.$set(t.apiData,"c_wx",e)},expression:"apiData.c_wx"}})],1),a("el-form-item",[a("el-button",{staticClass:"submit-btn",attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("提交")])],1)],1)],1),a("home-footer")],1)},o=[],s=(a("7514"),a("cebc")),n=(a("cadf"),a("551c"),a("097d"),a("e725")),c=a("9fe9"),l=a("2f62"),r=a("a76a"),u=a("953d"),h=(a("a753"),a("8096"),a("14e1"),{data:function(){return{c_type:[],c_type2:[],apiData:{u_id:"",c_title:"",c_type:"",c_type2:"",c_images:[],c_price:"",c_address:"",c_detail:"",c_num:1,c_state:1,c_tel:"",c_qq:"",c_wx:""},imageUrl:"",dialogImageUrl:"",dialogVisible:!1,imgCount:0,isShow:!1,fileList:[],content:"",editorOption:{}}},components:{HomeHeader:n["a"],HomeFooter:c["a"],quillEditor:u["quillEditor"]},computed:Object(s["a"])({},Object(l["d"])(["userInfo"]),{filePath:function(){var t=this;if(void 0!==this.apiData.c_images)return this.apiData.c_images.map(function(e){return{url:t.$SERVER.FILEURL+e}})},editor:function(){return this.$refs.myQuillEditor.quill}}),methods:{handleRemove:function(t,e){this.imgCount--,this.imgCount<4&&(this.isShow=!1)},handlePictureCardPreview:function(t){this.dialogImageUrl=this.$SERVER.FILEURL+t.response.data.url,this.dialogVisible=!0},handleSuccess:function(t){this.apiData.c_images.push(t.data.url),this.imgCount++,4===this.imgCount?this.isShow=!0:this.isShow=!1},getTypeList:function(){var t=this;this.$api(this.$SERVER.GET_TYPELIST).then(function(e){t.c_type=e.data.list,t.getType2()})},getType2:function(){var t=this.apiData.c_type;this.c_type2=""!=t?this.c_type.find(function(e){return e.t_name==t}).t_types:[]},onSubmit:function(){this.$route.query.id?this.upInfo():this.addInfo()},addInfo:function(){var t=this,e=Object(r["a"])(this.apiData);e.c_price*=100,this.$api.post(this.$SERVER.POST_COMMODITYADD,e).then(function(e){return e.state?t.thenSubmit("发布"):t.$message.error(e.mes)})},thenSubmit:function(t){this.$message.success(t+"成功"),this.$router.push("/user/sale")},upInfo:function(){var t=this,e=Object(r["a"])(this.apiData);e.c_price*=100,this.$api.post(this.$SERVER.POST_COMMODITYUPINFO,Object(s["a"])({},e,{c_id:this.$route.query.id})).then(function(e){return e.state?t.thenSubmit("编辑"):t.$message.error(e.mes)})},getUserInfo:function(){var t=this;this.$api(this.$SERVER.GET_CURRENTUSERINFO).then(function(e){t.apiData.u_id=e.data._id})},getCommodity:function(){var t=this;this.$route.query.id&&this.$api(this.$SERVER.GET_COMMODITYINFO,{params:{id:this.$route.query.id}}).then(function(e){t.apiData=e.data,t.apiData.c_price/=100})},onEditorReady:function(t){},onEditorBlur:function(){},onEditorFocus:function(){},onEditorChange:function(){}},created:function(){this.getTypeList(),this.getUserInfo(),this.getCommodity()},watch:{$route:{handler:function(){this.$route.query.id?this.getCommodity():this.apiData={}}}}}),d=h,f=(a("b24a"),a("2877")),p=Object(f["a"])(d,i,o,!1,null,null,null);p.options.__file="index.vue";e["default"]=p.exports},1169:function(t,e,a){var i=a("2d95");t.exports=Array.isArray||function(t){return"Array"==i(t)}},"16d8":function(t,e,a){},"34f0":function(t,e,a){"use strict";var i=a("ad90"),o=a.n(i);o.a},"5e2f":function(t,e,a){"use strict";var i=a("9c3f"),o=a.n(i);o.a},"663d":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQQAAAEECAIAAABBat1dAAAEW0lEQVR4nO3dQY7cOBAAwenF/v/L3ktij7RBoSSqHXE1WqOZVoKHMqnPr1+/foCfn3+evgE4hRggYoCIASIGiBggYoCIAfLv4t8+n89t9zFtMVtc/5rbHxyyHpIubml7uvqXPAY/Vgb4nxggYoCIASIGiBggYoCIASIGyGoCvXbaftGhQenETHd92SsfnBi0r33TY2BlgIgBIgaIGCBigIgBIgaIGCD7Q7eFofnXI/Odod2SQ9Ox07ZovutJsDJAxAARA0QMEDFAxAARA0QMEDFARibQ7zI0073/hOCLn8XKABEDRAwQMUDEABEDRAwQMUDEADGB3jc07r2yb/j+g4e/iZUBIgaIGCBigIgBIgaIGCBigIwM3d41wRmaRj1yBvBpBw+/60mwMkDEABEDRAwQMUDEABEDRAwQMUD2J9CnDTvvN/SO2isHIW9v+9z2TY+BlQEiBogYIGKAiAEiBogYIGKAiAHyedcu1QmPnMh7/+DWF/1bVgaIGCBigIgBIgaIGCBigIgBMnLw8NBEaWg/5Lahn/g1Y76f845tXt+PlQEiBogYIGKAiAEiBogYIGKAiAEycvDwlVHxtvt/6LtOCF7bvp+hGfMjm1StDBAxQMQAEQNEDBAxQMQAEQPkTds+H5nWvcv27Oz+t48e+Ge3MkDEABEDRAwQMUDEABEDRAwQMUBWb/s8beL7yP7D0wztbr3/r/fIplkHD8MfEQNEDBAxQMQAEQNEDBAxQMQAWU2gf/PJ2we3B55n/DW290BvX/YKE2iYJQaIGCBigIgBIgaIGCBigKwOHn7XNsuh6dj92xpPmy0OPQZD39eVy1oZIGKAiAEiBogYIGKAiAEiBogYIMe9+nboIOT7z1d+1+B2yP2D7SusDBAxQMQAEQNEDBAxQMQAEQNEDJCRCfQjTttz/K6tzNse2Sg/NJ+2MkDEABEDRAwQMUDEABEDRAyQkaHbI/Om+8c0j/ya7zI06xyahFoZIGKAiAEiBogYIGKAiAEiBogYIJ93HWQ74ZFX8Q6NZk876Pddrzm2MkDEABEDRAwQMUDEABEDRAyQ1bbPb9q4uBjTDJ0Hetosb9uBry3dHlmuWRkgYoCIASIGiBggYoCIASIGiBgg+wcPn7Zf9JHzjBeGRsX3/7eAd+0IvTIvtzJAxAARA0QMEDFAxAARA0QMEDFARl59+67jZoeO8n3XDvKvGWxfYWWAiAEiBogYIGKAiAEiBogYICNDt7/EI6/lvHJLew7cnzl0WSsDRAwQMUDEABEDRAwQMUDEABEDxAT6N7bfsro9n74y2B667ML9r+KdY2WAiAEiBogYIGKAiAEiBogYIGKAjEygDzxTdmF7hnrg5uCJW7rybT6ylXmblQEiBogYIGKAiAEiBogYIGKAfIZOwD3Nu+aAEx4ZY532CDl4GP6IGCBigIgBIgaIGCBigIgBIgbIagINfxUrA0QMEDFAxAARA0QMEDFAxAARA+Q/+FmFKoxLrsoAAAAASUVORK5CYII="},"6f23":function(t,e,a){t.exports=a.p+"img/wechat.b4288f39.jpg"},7514:function(t,e,a){"use strict";var i=a("5ca1"),o=a("0a49")(5),s="find",n=!0;s in[]&&Array(1)[s](function(){n=!1}),i(i.P+i.F*n,"Array",{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(s)},"9c3f":function(t,e,a){},"9fe9":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"footer"},[i("div",{staticClass:"w"},[i("div",{staticClass:"contact"},[t._m(0),i("div",{staticClass:"connect"},[i("Poptip",{attrs:{trigger:"hover",placement:"top"}},[i("a",[i("i",{staticClass:"iconfont"},[t._v("")])]),i("div",{staticClass:"api",attrs:{slot:"content"},slot:"content"},[i("img",{attrs:{src:a("663d"),alt:""}})])])],1),i("div",{staticClass:"connect"},[i("Poptip",{attrs:{trigger:"hover",placement:"top"}},[i("a",[i("i",{staticClass:"iconfont"},[t._v("")])]),i("div",{staticClass:"api",attrs:{slot:"content"},slot:"content"},[i("img",{attrs:{src:a("6f23"),alt:""}})])])],1)])])])},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h3",{staticClass:"title"},[t._v("\n        联系我们/\n        "),a("span",[t._v("cantact us")])])}],s=(a("34f0"),a("2877")),n={},c=Object(s["a"])(n,i,o,!1,null,"c2d0dc48",null);c.options.__file="index.vue";e["a"]=c.exports},ad90:function(t,e,a){},b24a:function(t,e,a){"use strict";var i=a("16d8"),o=a.n(i);o.a},cd1c:function(t,e,a){var i=a("e853");t.exports=function(t,e){return new(i(t))(e)}},e278:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-select",{attrs:{filterable:"",remote:"",clearable:"",placeholder:"学校","remote-method":t.getSchoolList,loading:t.schoolLoading},on:{change:t.setVal,clear:t.setVal},model:{value:t.val,callback:function(e){t.val=e},expression:"val"}},t._l(t.schools,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.name}})}),1)},o=[],s={name:"school",props:["school","schools"],data:function(){return{val:"",schoolLoading:!1}},methods:{getSchoolList:function(t){var e=this;""!==t&&(this.schoolLoading=!0,this.$api("".concat(this.$SERVER.GET_SCHOOILIST,"?name=").concat(t)).then(function(t){e.schoolLoading=!1,e.$emit("list",t.data)}))},setVal:function(t){console.log(t),this.$emit("change",t)}},created:function(){},mounted:function(){},watch:{school:function(t){this.val=t}}},n=s,c=a("2877"),l=Object(c["a"])(n,i,o,!1,null,null,null);l.options.__file="index.vue";e["a"]=l.exports},e725:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header"},[a("div",{staticClass:"w"},[t._m(0),a("router-link",{attrs:{to:"/"}},[a("div",{staticClass:"home"},[t._v("首页")])]),a("div",{staticClass:"school"},[a("span",{staticClass:"location iconfont"},[t._v("")]),a("span",[t._v(t._s(t.u_school))]),a("a",{staticClass:"change",on:{click:function(e){t.modal=!0}}},[t._v("[切换]")]),a("Modal",{attrs:{title:"请输入学校名称","class-name":"vertical-center-modal"},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("school",{attrs:{school:t.changeSchoolName,schools:t.schoolList},on:{list:t.getSchoolList,change:t.setSchool}}),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("button",{staticClass:"ivu-btn ivu-btn-text ivu-btn-large",attrs:{type:"button"},on:{click:t.cancel}},[a("span",[t._v("取消")])]),a("button",{staticClass:"ivu-btn ivu-btn-primary ivu-btn-large",attrs:{type:"button"},on:{click:t.changeSchool}},[a("span",[t._v("确定")])])])],1)],1),a("el-button",{staticClass:"release",attrs:{type:"info"},on:{click:t.handleRelease}},[t._v("发布商品")]),a("Modal",{attrs:{width:"360"},model:{value:t.login,callback:function(e){t.login=e},expression:"login"}},[a("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[a("Icon",{attrs:{type:"ios-information-circle"}}),a("span",[t._v("您还未登录")])],1),a("div",{staticClass:"toLogin"},[a("Button",{attrs:{type:"primary"},on:{click:t.handleLogin}},[t._v("请先登录")])],1),a("div",{attrs:{slot:"footer"},slot:"footer"})]),t.userInfo.u_avatar?a("ul",{staticClass:"login-box"},[a("li",[a("a",{staticClass:"headpic-link",on:{click:t.toUser}},[a("img",{staticClass:"headpic",attrs:{src:t.$SERVER.FILEURL+t.userInfo.u_avatar}})])]),a("li",[a("a",{staticClass:"quit",on:{click:function(e){t.handleQuit()}}},[t._v("退出")])])]):t._e(),t.userInfo.u_avatar?t._e():a("ul",{staticClass:"unLogin"},[a("router-link",{attrs:{to:"/login"}},[a("a",{staticClass:"login"},[t._v("登录")])]),a("router-link",{attrs:{to:"/register"}},[a("a",{staticClass:"register"},[t._v("注册")])])],1),a("div",{staticClass:"search"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchKey,expression:"searchKey"}],staticClass:"search-filed",attrs:{type:"text",placeholder:"搜索"},domProps:{value:t.searchKey},on:{input:function(e){e.target.composing||(t.searchKey=e.target.value)}}}),a("button",{staticClass:"search-btn",on:{click:t.searchResult}},[t._v("搜索")])])],1)])},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h1",[a("a",{staticClass:"logo",attrs:{href:"javascript:void(0)"}},[t._v("校乐购")])])}],s=a("cebc"),n=(a("cadf"),a("551c"),a("097d"),a("2f62")),c=a("e278"),l={props:["unLogin"],data:function(){return{login:!1,modal:!1,changeSchoolName:"",schoolList:[],searchKey:""}},components:{School:c["a"]},computed:Object(s["a"])({},Object(n["d"])(["userInfo","u_school"])),methods:Object(s["a"])({},Object(n["c"])(["setUserInfo","setCommoditySchool"]),{handleQuit:function(){var t=this;this.$api(this.$SERVER.GET_QUIT).then(function(e){t.setUserInfo(),t.setCommoditySchool(""),t.$router.push("/")})},toUser:function(){this.$router.push("/user/personal")},handleRelease:function(){this.userInfo.u_avatar?this.$router.push("/release"):this.login=!0},handleLogin:function(){this.login=!1,this.$router.push("/login")},getUserInfo:function(){var t=this;this.$api(this.$SERVER.GET_CURRENTUSERINFO).then(function(e){t.setUserInfo(e.data),null!==e.data&&t.setCommoditySchool(e.data.u_school),t.changeSchoolName=t.u_school})},isLogin:function(){var t=this;this.$api(this.$SERVER.GET_ISLOGIN).then(function(e){return e.state&&t.getUserInfo()})},getSchoolList:function(t){this.schoolList=t},setSchool:function(t){this.changeSchoolName=t},changeSchool:function(){this.setCommoditySchool(this.changeSchoolName),this.modal=!1},cancel:function(){this.modal=!1},searchResult:function(){this.$emit("getCommodity",this.searchKey)}}),created:function(){this.isLogin()}},r=l,u=(a("5e2f"),a("2877")),h=Object(u["a"])(r,i,o,!1,null,null,null);h.options.__file="index.vue";e["a"]=h.exports},e853:function(t,e,a){var i=a("d3f4"),o=a("1169"),s=a("2b4c")("species");t.exports=function(t){var e;return o(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!o(e.prototype)||(e=void 0),i(e)&&(e=e[s],null===e&&(e=void 0))),void 0===e?Array:e}}}]);
//# sourceMappingURL=chunk-8b2c1cd4.1a218a39.js.map